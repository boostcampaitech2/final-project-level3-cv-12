{"ast":null,"code":"var _jsxFileName = \"/Users/chaeyounglim/Desktop/project-canvas-frontend/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState, useEffect } from 'react';\nimport './App.css';\nimport Canvas from './canvas/Canvas';\nimport Output from './output/Output';\nimport Buttons from './buttons/Buttons';\nimport Parameters from './buttons/Parameters';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\n\nfunction App() {\n  _s();\n\n  const canvasRef = useRef(null);\n  const outputRef = useRef(null);\n  const [eyeL, setEyeL] = useState(0.01);\n  const [eyeR, setEyeR] = useState(0.01);\n  const [mouth, setMouth] = useState(0.01);\n  const [nose, setNose] = useState(0.01);\n  const [other, setOther] = useState(0.01);\n  const [brushsize, setBrushsize] = useState(4);\n  const [erasersize, setErasersize] = useState(10);\n  const [drawingstate, setDrawingstate] = useState(true);\n  const [undoSteps, setUndoSteps] = useState([]);\n  const [redoSteps, setRedoSteps] = useState([]);\n  const [undo, setUndo] = useState(0);\n  const [redo, setRedo] = useState(0);\n  const [realtime, setRealtime] = useState(true);\n  const [loading, setLoading] = useState(false);\n  const [background, setBackground] = useState(true);\n  useEffect(() => {\n    console.log(\"loading \", loading);\n  }, [loading]);\n  useEffect(() => {\n    console.log(\"realtime \", realtime);\n  }, [realtime]);\n\n  const fetchImage = () => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    if (!loading) {\n      try {\n        setLoading(true);\n        const data = canvasRef.current.toDataURL('image/png', 1.0);\n        axios.post('http://27.96.135.229:8900/', data, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }).then(res => {\n          if (!outputRef.current) {\n            return;\n          }\n\n          const canvas = outputRef.current;\n          const context = canvas.getContext('2d');\n\n          if (context) {\n            var image = new Image();\n            image.src = res.data;\n\n            image.onload = function () {\n              if (!context) {\n                return;\n              }\n\n              context.drawImage(image, 0, 0);\n            };\n          }\n        });\n      } catch (e) {\n        console.log(e);\n        return;\n      }\n\n      ;\n      setLoading(false);\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"body\", {\n    className: \"h-screen bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"upside\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cvcoin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Buttons, {\n          canvasRef: canvasRef,\n          eyeL: eyeL,\n          eyeR: eyeR,\n          nose: nose,\n          mouth: mouth,\n          other: other,\n          drawingstate: drawingstate,\n          brushsize: brushsize,\n          erasersize: erasersize,\n          setBrushsize: setBrushsize,\n          setErasersize: setErasersize,\n          setDrawingstate: setDrawingstate,\n          undoSteps: undoSteps,\n          setUndoSteps: setUndoSteps,\n          redoSteps: redoSteps,\n          setRedoSteps: setRedoSteps,\n          undo: undo,\n          setUndo: setUndo,\n          redo: redo,\n          setRedo: setRedo,\n          realtime: realtime,\n          setRealtime: setRealtime,\n          background: background,\n          loading: loading,\n          setBackground: setBackground,\n          setLoading: setLoading,\n          fetchImage: fetchImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Parameters, {\n          canvasRef: canvasRef,\n          eyeL: eyeL,\n          eyeR: eyeR,\n          nose: nose,\n          mouth: mouth,\n          other: other,\n          realtime: realtime,\n          setEyeL: setEyeL,\n          setEyeR: setEyeR,\n          setMouth: setMouth,\n          setNose: setNose,\n          setOther: setOther,\n          outputRef: outputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"downside\",\n        children: [/*#__PURE__*/_jsxDEV(Canvas, {\n          canvasRef: canvasRef,\n          eyeL: eyeL,\n          eyeR: eyeR,\n          nose: nose,\n          mouth: mouth,\n          other: other,\n          drawingstate: drawingstate,\n          brushsize: brushsize,\n          erasersize: erasersize,\n          undoSteps: undoSteps,\n          setUndoSteps: setUndoSteps,\n          redoSteps: redoSteps,\n          setRedoSteps: setRedoSteps,\n          undo: undo,\n          setUndo: setUndo,\n          redo: redo,\n          setRedo: setRedo,\n          realtime: realtime,\n          background: background,\n          loading: loading,\n          setLoading: setLoading,\n          fetchImage: fetchImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Output, {\n          loading: loading,\n          outputRef: outputRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"4Ml4mgTZ4qVfQLPY2bReZdWjo9s=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/chaeyounglim/Desktop/project-canvas-frontend/src/App.tsx"],"names":["useRef","useState","useEffect","Canvas","Output","Buttons","Parameters","axios","App","canvasRef","outputRef","eyeL","setEyeL","eyeR","setEyeR","mouth","setMouth","nose","setNose","other","setOther","brushsize","setBrushsize","erasersize","setErasersize","drawingstate","setDrawingstate","undoSteps","setUndoSteps","redoSteps","setRedoSteps","undo","setUndo","redo","setRedo","realtime","setRealtime","loading","setLoading","background","setBackground","console","log","fetchImage","current","data","toDataURL","post","headers","then","res","canvas","context","getContext","image","Image","src","onload","drawImage","e"],"mappings":"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","sourcesContent":["import { useRef, useState, useEffect } from 'react';\nimport './App.css';\nimport Canvas from './canvas/Canvas';\nimport Output from './output/Output';\nimport Buttons from './buttons/Buttons';\nimport Parameters from './buttons/Parameters';\nimport axios from 'axios';\n\ninterface Record {\n\tx: number;\n\ty: number;\n\tc: boolean;\n\ts: number;\n};\n\nfunction App() {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\tconst outputRef = useRef<HTMLCanvasElement>(null);\n\tconst [eyeL, setEyeL] = useState<number>(0.01);\n\tconst [eyeR, setEyeR] = useState<number>(0.01);\n\tconst [mouth, setMouth] = useState<number>(0.01);\n\tconst [nose, setNose] = useState<number>(0.01);\n\tconst [other, setOther] = useState<number>(0.01);\n\tconst [brushsize, setBrushsize] = useState<number>(4);\n\tconst [erasersize, setErasersize] = useState<number>(10);\n\tconst [drawingstate, setDrawingstate] = useState<boolean>(true);\n\n\tconst [undoSteps, setUndoSteps] = useState<Array<Record | never[]>>([]);\n\tconst [redoSteps, setRedoSteps] = useState<Array<Record | never[]>>([]);\n\tconst [undo, setUndo] = useState<number>(0);\n\tconst [redo, setRedo] = useState<number>(0);\n\n\tconst [realtime, setRealtime] = useState<boolean>(true);\n\tconst [loading, setLoading] = useState<boolean>(false);\n\tconst [background, setBackground] = useState<boolean>(true);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"loading \", loading);\n\t  }, [loading]);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"realtime \", realtime);\n\t  }, [realtime]);\n\tconst fetchImage = () => {\n\t\tif (!canvasRef.current) { return; }\n\t\tif (!loading) {\n\t\t\ttry {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst data = canvasRef.current.toDataURL('image/png', 1.0);\n\t\t\t\taxios.post('http://27.96.135.229:8900/', data, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data',\n\t\t\t\t\t}}).then((res) => {\n\t\t\t\t\t\tif (!outputRef.current) { return; }\n\t\t\t\t\t\tconst canvas: HTMLCanvasElement = outputRef.current;\n\t\t\t\t\t\tconst context = canvas.getContext('2d');\n\t\t\t\t\t\tif (context) {\n\t\t\t\t\t\t\tvar image = new Image();\n\t\t\t\t\t\t\timage.src = res.data;\n\t\t\t\t\t\t\timage.onload = function() {\n\t\t\t\t\t\t\t\tif (!context) { return; }\n\t\t\t\t\t\t\tcontext.drawImage(image, 0, 0);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn ;\n\t\t\t};\n\t\t\tsetLoading(false);\n\t\t\treturn ;\n\t\t}\n\t};\n\n\treturn (\n\t\t<body className=\"h-screen bg-gradient-to-r from-yellow-400 via-red-500 to-pink-500\">\n\t\t\t<div className=\"App\">\n\t\t\t\t<div className=\"upside\">\n\t\t\t\t\t<div className=\"cvcoin\"></div>\n\t\t\t\t\t<Buttons canvasRef={canvasRef} eyeL={eyeL} eyeR={eyeR} nose={nose} mouth={mouth} other={other}\n\t\t\t\t\tdrawingstate={drawingstate} brushsize={brushsize} erasersize={erasersize} setBrushsize={setBrushsize} setErasersize={setErasersize} setDrawingstate={setDrawingstate}\n\t\t\t\t\tundoSteps={undoSteps} setUndoSteps={setUndoSteps} redoSteps={redoSteps} setRedoSteps={setRedoSteps}\n\t\t\t\t\tundo={undo} setUndo={setUndo} redo={redo} setRedo={setRedo} realtime={realtime} setRealtime={setRealtime}\n\t\t\t\t\tbackground={background} loading={loading} setBackground={setBackground} setLoading={setLoading} fetchImage={fetchImage}/>\n\t\t\t\t\t<Parameters canvasRef={canvasRef} eyeL={eyeL} eyeR={eyeR} nose={nose} mouth={mouth} other={other} realtime={realtime}\n\t\t\t\t\tsetEyeL={setEyeL} setEyeR={setEyeR} setMouth={setMouth} setNose={setNose} setOther={setOther} outputRef={outputRef}/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"downside\">\n\t\t\t\t\t<Canvas canvasRef={canvasRef} eyeL={eyeL} eyeR={eyeR} nose={nose} mouth={mouth} other={other}\n\t\t\t\t\tdrawingstate={drawingstate} brushsize={brushsize} erasersize={erasersize}\n\t\t\t\t\tundoSteps={undoSteps} setUndoSteps={setUndoSteps} redoSteps={redoSteps} setRedoSteps={setRedoSteps}\n\t\t\t\t\tundo={undo} setUndo={setUndo} redo={redo} setRedo={setRedo} realtime={realtime}\n\t\t\t\t\tbackground={background} loading={loading} setLoading={setLoading} fetchImage={fetchImage}/>\n\t\t\t\t\t<Output loading={loading} outputRef={outputRef}/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</body>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}