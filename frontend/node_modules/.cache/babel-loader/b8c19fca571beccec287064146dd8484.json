{"ast":null,"code":"var _jsxFileName = \"/Users/chaeyounglim/Desktop/project-canvas-frontend/src/canvas/Canvas.tsx\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState, useCallback, useEffect } from 'react';\nimport '../styles/styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\n\nfunction Canvas({\n  width,\n  height\n}) {\n  _s();\n\n  const canvasRef = useRef(null); // Mouse pointer poisition\n\n  const [mousePosition, setMousePosition] = useState(undefined);\n  const [isPainting, setIsPainting] = useState(false); // 좌표 얻는 함수\n\n  const getCoordinates = event => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    return {\n      x: event.pageX - canvas.offsetLeft,\n      y: event.pageY - canvas.offsetTop\n    };\n  }; // canvas에 선을 긋는 함수\n\n\n  const drawLine = (originalMousePosition, newMousePosition) => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d');\n\n    if (context) {\n      context.strokeStyle = \"red\"; // 선 색깔\n\n      context.lineJoin = 'round'; // 선 끄트머리(?)\n\n      context.lineWidth = 5; // 선 굵기\n\n      context.beginPath();\n      context.moveTo(originalMousePosition.x, originalMousePosition.y);\n      context.lineTo(newMousePosition.x, newMousePosition.y);\n      context.closePath();\n      context.stroke();\n    }\n  };\n\n  const startPaint = useCallback(event => {\n    const coordinates = getCoordinates(event);\n\n    if (coordinates) {\n      setIsPainting(true);\n      setMousePosition(coordinates);\n    }\n  }, []);\n  const paint = useCallback(event => {\n    event.preventDefault(); // drag 방지\n\n    event.stopPropagation(); // drag 방지\n\n    if (isPainting) {\n      const newMousePosition = getCoordinates(event);\n\n      if (mousePosition && newMousePosition) {\n        drawLine(mousePosition, newMousePosition);\n        setMousePosition(newMousePosition);\n      }\n    }\n  }, [isPainting, mousePosition]);\n  const exitPaint = useCallback(() => {\n    setIsPainting(false);\n  }, []);\n  useEffect(() => {\n    if (!canvasRef.current) {\n      return;\n    }\n\n    const canvas = canvasRef.current;\n    canvas.addEventListener('mousedown', startPaint);\n    canvas.addEventListener('mousemove', paint);\n    canvas.addEventListener('mouseup', exitPaint);\n    canvas.addEventListener('mouseleave', exitPaint);\n    return () => {\n      // Unmount 시 이벤트 리스터 제거\n      canvas.removeEventListener('mousedown', startPaint);\n      canvas.removeEventListener('mousemove', paint);\n      canvas.removeEventListener('mouseup', exitPaint);\n      canvas.removeEventListener('mouseleave', exitPaint);\n    };\n  }, [startPaint, paint, exitPaint]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      height: height,\n      width: width,\n      className: \"canvas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"imageresult\",\n      alt: \"result\",\n      src: \"img/bg.jpg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Canvas, \"VqciyNGFbb7GepeMpJD4MtPMBXo=\");\n\n_c = Canvas;\nCanvas.defaultProps = {\n  width: 512,\n  height: 512\n};\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/Users/chaeyounglim/Desktop/project-canvas-frontend/src/canvas/Canvas.tsx"],"names":["useRef","useState","useCallback","useEffect","Canvas","width","height","canvasRef","mousePosition","setMousePosition","undefined","isPainting","setIsPainting","getCoordinates","event","current","canvas","x","pageX","offsetLeft","y","pageY","offsetTop","drawLine","originalMousePosition","newMousePosition","context","getContext","strokeStyle","lineJoin","lineWidth","beginPath","moveTo","lineTo","closePath","stroke","startPaint","coordinates","paint","preventDefault","stopPropagation","exitPaint","addEventListener","removeEventListener","defaultProps"],"mappings":"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","sourcesContent":["import { useRef, useState, useCallback, useEffect } from 'react';\nimport '../styles/styles.css';\n\ninterface CanvasProps {\n\twidth: number;\n\theight: number;\n}\n\ninterface Coordinate {\n  x: number;\n  y: number;\n};\n\nfunction Canvas({ width, height }: CanvasProps) {\n\tconst canvasRef = useRef<HTMLCanvasElement>(null);\n\n\t// Mouse pointer poisition\n\tconst [mousePosition, setMousePosition] = useState<Coordinate | undefined>(undefined);\n\tconst [isPainting, setIsPainting] = useState(false);\n\n\n\t// 좌표 얻는 함수\n\tconst getCoordinates = (event: MouseEvent): Coordinate | undefined => {\n\t\tif (!canvasRef.current) {\n\t\t\treturn;\n\t}\n\n\tconst canvas: HTMLCanvasElement = canvasRef.current;\n\treturn {\n\t\tx: event.pageX - canvas.offsetLeft,\n\t\ty: event.pageY - canvas.offsetTop\n\t\t};\n\t};\n\n\t// canvas에 선을 긋는 함수\n\tconst drawLine = (originalMousePosition: Coordinate, newMousePosition: Coordinate) => {\n\t  if (!canvasRef.current) {\n\t\treturn;\n\t  }\n\t  const canvas: HTMLCanvasElement = canvasRef.current;\n\t  const context = canvas.getContext('2d');\n\n\t  if (context) {\n\t\tcontext.strokeStyle = \"red\";  // 선 색깔\n\t\tcontext.lineJoin = 'round';\t// 선 끄트머리(?)\n\t\tcontext.lineWidth = 5;\t\t// 선 굵기\n\n\t\tcontext.beginPath();\n\t\tcontext.moveTo(originalMousePosition.x, originalMousePosition.y);\n\t\tcontext.lineTo(newMousePosition.x, newMousePosition.y);\n\t\tcontext.closePath();\n\n\t\tcontext.stroke();\n\t  }\n\t};\n\n\tconst startPaint = useCallback((event: MouseEvent) => {\n\t  const coordinates = getCoordinates(event);\n\t  if (coordinates) {\n\t\tsetIsPainting(true);\n\t\tsetMousePosition(coordinates);\n\t  }\n\t}, []);\n\n\tconst paint = useCallback(\n\t  (event: MouseEvent) => {\n\t\tevent.preventDefault();   // drag 방지\n\t\tevent.stopPropagation();  // drag 방지\n\n\t\tif (isPainting) {\n\t\t  const newMousePosition = getCoordinates(event);\n\t\t  if (mousePosition && newMousePosition) {\n\t\t\tdrawLine(mousePosition, newMousePosition);\n\t\t\tsetMousePosition(newMousePosition);\n\t\t  }\n\t\t}\n\t  },\n\t  [isPainting, mousePosition]\n\t);\n\n\tconst exitPaint = useCallback(() => {\n\t  setIsPainting(false);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!canvasRef.current) {\n\t\t  return;\n\t\t}\n\t\tconst canvas: HTMLCanvasElement = canvasRef.current;\n\n\t\tcanvas.addEventListener('mousedown', startPaint);\n\t\tcanvas.addEventListener('mousemove', paint);\n\t\tcanvas.addEventListener('mouseup', exitPaint);\n\t\tcanvas.addEventListener('mouseleave', exitPaint);\n\n\t\treturn () => {\n\t\t  // Unmount 시 이벤트 리스터 제거\n\t\t  canvas.removeEventListener('mousedown', startPaint);\n\t\t  canvas.removeEventListener('mousemove', paint);\n\t\t  canvas.removeEventListener('mouseup', exitPaint);\n\t\t  canvas.removeEventListener('mouseleave', exitPaint);\n\t\t};\n\t  }, [startPaint, paint, exitPaint]);\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<canvas ref={canvasRef} height={height} width={width} className=\"canvas\"/>\n\t\t\t<img className=\"imageresult\" alt=\"result\" src=\"img/bg.jpg\" />\n\t\t</div>\n\t);\n  }\n\nCanvas.defaultProps = {\n\twidth: 512,\n\theight: 512\n  };\n\nexport default Canvas;"]},"metadata":{},"sourceType":"module"}